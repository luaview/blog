<h1 id="api-nui">API-NUI</h1>

<h2 id="http">Http</h2>

<blockquote>
<p>Http</p>
</blockquote>
<pre class="highlight plaintext"><code>Http({
    "method": "POST",
    "params": {
        "k1": "v1",
        "k2": "v2"
    }
}, function(response)
    print("called success")
end)


http = Http()
http.get("http://luaview.github.io", {
    query = 1
}, function(response)
    print("called success")
end)
</code></pre>

<aside class="notice" id="nhttp">
网络请求组件。
</aside>

<p>Http(initParams, callback)</p>

<ul>
<li>initParams: LuaTable，请求参数

<ul>
<li>method: String, 请求方法</li>
<li>params: LuaTable, 请求业务参数</li>
</ul></li>
<li>callback: LuaFunction, 回调

<ul>
<li>返回参数response为LuaTable</li>
<li>response.data() 得到 Data数据</li>
</ul></li>
</ul>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>url</td>
<td>v: String</td>
<td>v</td>
<td>Android</td>
<td>设置请求Url</td>
</tr>
<tr>
<td>2</td>
<td>method</td>
<td>v: String, get/post</td>
<td>v</td>
<td>Android</td>
<td>设置请求方法</td>
</tr>
<tr>
<td>3</td>
<td>retryTimes</td>
<td>v: Number</td>
<td>v</td>
<td>Android</td>
<td>重试次数</td>
</tr>
<tr>
<td>4</td>
<td>timeout</td>
<td>v: Number</td>
<td>v</td>
<td>Android</td>
<td>超时时间</td>
</tr>
<tr>
<td>5</td>
<td>params</td>
<td>v: LuaTable</td>
<td>v</td>
<td>Android</td>
<td>请求参数</td>
</tr>
<tr>
<td>6</td>
<td>callback</td>
<td>v: LuaFunction</td>
<td>Android</td>
<td>请求回调</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>request</td>
<td>-</td>
<td>-</td>
<td>Android</td>
<td>请求</td>
</tr>
<tr>
<td>8</td>
<td>cancel</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>中止</td>
</tr>
<tr>
<td>9</td>
<td>get</td>
<td>url: String<br/> params: LuaTable<br/> callback: LuaFunction</td>
<td>-</td>
<td>-</td>
<td>GET请求</td>
</tr>
<tr>
<td>10</td>
<td>post</td>
<td>url: String<br/> params: LuaTable<br/> callback: LuaFunction</td>
<td>-</td>
<td>-</td>
<td>POST请求</td>
</tr>
<tr>
<td>11</td>
<td>header</td>
<td></td>
<td>-</td>
<td>IOS</td>
<td>http响应的头信息</td>
</tr>
<tr>
<td>11</td>
<td>data</td>
<td></td>
<td>-</td>
<td>IOS</td>
<td>http响应的数据体(数据块类型)</td>
</tr>
<tr>
<td>11</td>
<td>code</td>
<td></td>
<td>-</td>
<td>IOS</td>
<td>http响应的code</td>
</tr>
</tbody></table>

<h2 id="timer">Timer</h2>

<aside class="notice" id="timer">
定时器组件。
</aside>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>delay</td>
<td>v: Number</td>
<td>v</td>
<td>-</td>
<td>启动延时</td>
</tr>
<tr>
<td>2</td>
<td>repeat</td>
<td>v: Number</td>
<td>v</td>
<td>-</td>
<td>重复次数</td>
</tr>
<tr>
<td>3</td>
<td>repeatCount</td>
<td>v: Number</td>
<td>v</td>
<td>-</td>
<td>重复次数</td>
</tr>
<tr>
<td>4</td>
<td>interval</td>
<td>v: Number</td>
<td>v</td>
<td>-</td>
<td>重复间隔</td>
</tr>
<tr>
<td>5</td>
<td>start</td>
<td>v: Number</td>
<td>v</td>
<td>-</td>
<td>启动</td>
</tr>
<tr>
<td>6</td>
<td>callback</td>
<td>v: LuaFunction</td>
<td>v</td>
<td>-</td>
<td>回调</td>
</tr>
<tr>
<td>7</td>
<td>cancel</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>取消</td>
</tr>
</tbody></table>

<h2 id="system">System</h2>

<aside class="notice" id="system">
系统信息组件，静态。
</aside>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>ios</td>
<td>-</td>
<td>v: Boolean</td>
<td>-</td>
<td>是否iOS平台</td>
</tr>
<tr>
<td>2</td>
<td>android</td>
<td>-</td>
<td>v: Boolean</td>
<td>-</td>
<td>是否Android平台</td>
</tr>
<tr>
<td>3</td>
<td>vmVersion</td>
<td>-</td>
<td>v: String</td>
<td>-</td>
<td>LuaView版本</td>
</tr>
<tr>
<td>4</td>
<td>osVersion</td>
<td>-</td>
<td>v: String</td>
<td>-</td>
<td>操作系统版本</td>
</tr>
<tr>
<td>5</td>
<td>platform</td>
<td>-</td>
<td>v: String</td>
<td>-</td>
<td>平台系统型号</td>
</tr>
<tr>
<td>6</td>
<td>scale</td>
<td>-</td>
<td>v: Number</td>
<td>-</td>
<td>屏幕缩放比</td>
</tr>
<tr>
<td>7</td>
<td>device</td>
<td>-</td>
<td>v: LuaTable</td>
<td>-</td>
<td>设备信息</td>
</tr>
<tr>
<td>8</td>
<td>screenSize</td>
<td>-</td>
<td>w: Number<br/> h: Number</td>
<td>-</td>
<td>屏幕尺寸</td>
</tr>
<tr>
<td>9</td>
<td>network</td>
<td>-</td>
<td>v: String</td>
<td>-</td>
<td>网络类型(&ldquo;none&rdquo;, &ldquo;2g&rdquo;, &ldquo;3g&rdquo;, &ldquo;4g&rdquo;, &ldquo;wifi&rdquo;, &ldquo;unknown&rdquo;)</td>
</tr>
<tr>
<td>10</td>
<td>gc</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>执行内存回收</td>
</tr>
<tr>
<td>11</td>
<td>keepScreenOn</td>
<td>v: Boolean</td>
<td>-</td>
<td>-</td>
<td>是否保持屏幕常亮</td>
</tr>
</tbody></table>

<h2 id="audioplayer">AudioPlayer</h2>

<aside class="notice" id="audio_player">
音频播放器组件。
</aside>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>play</td>
<td>name: String<br/> times: Number</td>
<td>-</td>
<td>-</td>
<td>播放（uri，重复次数）</td>
</tr>
<tr>
<td>2</td>
<td>pause</td>
<td>-</td>
<td>-</td>
<td>Android</td>
<td>暂停播放</td>
</tr>
<tr>
<td>3</td>
<td>resume</td>
<td>-</td>
<td>-</td>
<td>Android</td>
<td>恢复播放</td>
</tr>
<tr>
<td>4</td>
<td>stop</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>停止播放</td>
</tr>
<tr>
<td>5</td>
<td>seekTo</td>
<td>sec: Number</td>
<td>-</td>
<td>Android</td>
<td>到某个位置</td>
</tr>
<tr>
<td>6</td>
<td>callback</td>
<td>v: LuaFunction</td>
<td>v</td>
<td>Android</td>
<td>回调</td>
</tr>
<tr>
<td>7</td>
<td>playing</td>
<td>-</td>
<td>v: Boolean</td>
<td>Android</td>
<td>是否播放</td>
</tr>
<tr>
<td>8</td>
<td>pausing</td>
<td>-</td>
<td>v: Boolean</td>
<td>Android</td>
<td>是否暂停</td>
</tr>
<tr>
<td>9</td>
<td>looping</td>
<td>-</td>
<td>v: Boolean</td>
<td>Android</td>
<td>是否循环播放</td>
</tr>
</tbody></table>

<h2 id="vibrator">Vibrator</h2>

<blockquote>
<p>Vibrator</p>
</blockquote>
<pre class="highlight plaintext"><code>local vibrator = Vibrator()

vibrator.vibrate() -- 默认震动

vibrator.vibrate(2) -- 震动两次

vibrator.vibrate({1, 2, 1, 0.3, 0.2, 0.1, 0.01, 1.1}, 4) -- 特殊震动模式
</code></pre>

<aside class="notice" id="vibrator">
震动组件。
</aside>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>hasVibrator</td>
<td>-</td>
<td>v: Boolean</td>
<td>-</td>
<td>是否有震动硬件</td>
</tr>
<tr>
<td>2</td>
<td>vibrate</td>
<td>mode: Number[], repeatTimes: Number</td>
<td>-</td>
<td>-</td>
<td>震动(模式，次数)</td>
</tr>
<tr>
<td>3</td>
<td>cancel</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>取消震动</td>
</tr>
</tbody></table>

<h2 id="unicode">Unicode</h2>

<blockquote>
<p>Unicode</p>
</blockquote>
<pre class="highlight plaintext"><code>Unicode(0xe607)
</code></pre>

<aside class="notice" id="unicode">
unicode组件。
</aside>

<p>Unicode(char)</p>

<ul>
<li>char 为Unicode字符编码</li>
</ul>

<h2 id="data">Data</h2>

<blockquote>
<p>Data</p>
</blockquote>
<pre class="highlight plaintext"><code>Data("a")

Data(97, "abc", "def")

Data('{"a":"1"}')

Data('a').toString("latin-1")

Data('{"a":"1"}').toTable()

Data('{"a":"1"}').toJson()
</code></pre>

<aside class="notice" id="data">
二进制数据组件。
</aside>

<p>Data(str)</p>

<ul>
<li>str: String/JsonString</li>
</ul>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>append</td>
<td>v: Data/byte[]</td>
<td>-</td>
<td>-</td>
<td>新增部分数据</td>
</tr>
<tr>
<td>2</td>
<td>toString</td>
<td>code: String</td>
<td>v: String</td>
<td>-</td>
<td>转成String(编码格式)</td>
</tr>
<tr>
<td>3</td>
<td>toJson</td>
<td>-</td>
<td>v: String</td>
<td>-</td>
<td>转成Json String</td>
</tr>
<tr>
<td>4</td>
<td>toTable</td>
<td>-</td>
<td>v: LuaTable</td>
<td>-</td>
<td>转成LuaTable</td>
</tr>
</tbody></table>

<h2 id="json">Json</h2>

<aside class="notice" id="json">
Json组件，静态。
</aside>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>toTable</td>
<td>v: String/<a href="#data">Data</a>/LuaTable</td>
<td>r: LuaTable</td>
<td>-</td>
<td>给定内容转成LuaTable</td>
</tr>
<tr>
<td>2</td>
<td>isValid</td>
<td>v: String/<a href="#data">Data</a></td>
<td>r: Boolean</td>
<td>Android</td>
<td>是否有效JsonString</td>
</tr>
</tbody></table>

<h2 id="file">File</h2>

<blockquote>
<p>File</p>
</blockquote>
<pre class="highlight plaintext"><code>http = Http()
http.get("http://luaview.github.io", {
    query = 1
}, function(response)
  local data = response:data()

    -- 保存
    File.save(data, "test.html") -- 同步存
    File.save(data, "test.html", function(status)
        -- 异步存
    end)

    -- 读取
    data = File.read("test.html") -- 同步读
    File.read("test.html", function(data)
        -- 异步读取
    end)

    -- 存在判断
    print(File.exists("test.html"))

    -- 文件路径
    print(File.path("test.html"))
end)
</code></pre>

<aside class="notice" id="file">
文件操作组件，静态。
</aside>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>save</td>
<td>path: String<br/> data: <a href="#data">Data<a/> <br/> callback: LuaFunction or <br/> data: <a href="#data">Data<a/> <br/> path: String<br/> callback: LuaFunction</td>
<td>-</td>
<td>-</td>
<td>保存data内数据到path指定的文件内，文件名支持子目录或者上级目录</td>
</tr>
<tr>
<td>2</td>
<td>read</td>
<td>path: String<br/> callback: LuaFunction</td>
<td><a href="#data">Data</a></td>
<td>-</td>
<td>读取给定path的文件，并返回Data数据，支持异步读取，异步返回数据通过callback返回</td>
</tr>
<tr>
<td>3</td>
<td>exists</td>
<td>path: String</td>
<td>-</td>
<td>-</td>
<td>文件是否存在</td>
</tr>
<tr>
<td>4</td>
<td>path</td>
<td>name: filename</td>
<td>path:String</td>
<td>-</td>
<td>获取给定文件名的绝对存储路径</td>
</tr>
</tbody></table>

<h2 id="downloader">Downloader</h2>

<aside class="notice" id="downloader">
下载器组件，静态。
(Deprecated 所有功能可以通过<a href="#http">Http</a> and <a href="#file">File</a>完成)
</aside>

<table><thead>
<tr>
<th>ID</th>
<th>API</th>
<th>参数</th>
<th>返回值</th>
<th>平台</th>
<th>备注</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>fetch</td>
<td>url: String<br/> name: String<br/> callback: LuaFunction</td>
<td>-</td>
<td>-</td>
<td>TODO</td>
</tr>
</tbody></table>
